(()=>{var e={};e.id=150,e.ids=[150],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12518:e=>{"use strict";e.exports=require("mongodb")},24429:()=>{},27405:(e,t,s)=>{"use strict";s.d(t,{L:()=>o});var r=s(12518);let n=null;async function o(){if(!n){let e=process.env.MONGODB_URI;if(!e)throw Error("MONGODB_URI is not defined");n=new r.MongoClient(e),await n.connect()}return n.db("sunday_school")}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},41270:(e,t,s)=>{"use strict";s.r(t),s.d(t,{patchFetch:()=>m,routeModule:()=>x,serverHooks:()=>f,workAsyncStorage:()=>w,workUnitAsyncStorage:()=>j});var r={};s.r(r),s.d(r,{DELETE:()=>l,GET:()=>c,POST:()=>p});var n=s(30781),o=s(60554),a=s(31625),u=s(27405),i=s(96396),d=s(12518);async function c(){try{let e=await (0,u.L)(),t=await e.collection("students").find({}).toArray();return i.NextResponse.json(t,{status:200})}catch(e){return i.NextResponse.json({error:e.message},{status:500})}}async function p(e){try{let t=await (0,u.L)(),s=await e.json(),r=await t.collection("students").insertOne(s);return i.NextResponse.json({_id:r.insertedId},{status:201})}catch(e){return i.NextResponse.json({error:e.message},{status:500})}}async function l(e){try{let t=await (0,u.L)(),{id:s}=await e.json();if(!s)return i.NextResponse.json({error:"ID is required"},{status:400});let r=await t.collection("students").deleteOne({_id:new d.ObjectId(s)});if(0===r.deletedCount)return i.NextResponse.json({error:"Student not found"},{status:404});return i.NextResponse.json({message:"Student deleted"},{status:200})}catch(e){return i.NextResponse.json({error:e.message},{status:500})}}let x=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/students/route",pathname:"/api/students",filename:"route",bundlePath:"app/api/students/route"},resolvedPagePath:"C:\\Users\\Ym\\Desktop\\Ym\\sunday-school-attendance\\Website\\src\\app\\api\\students\\route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:w,workUnitAsyncStorage:j,serverHooks:f}=x;function m(){return(0,a.patchFetch)({workAsyncStorage:w,workUnitAsyncStorage:j})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64749:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[625,146],()=>s(41270));module.exports=r})();