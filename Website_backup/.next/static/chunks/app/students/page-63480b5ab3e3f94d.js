(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2935],{33773:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(73365),r=s(1521),l=s(19776),d=s(59534),n=s.n(d);function i(){let{status:e}=(0,l.useSession)(),[t,s]=(0,r.useState)([]),[d,i]=(0,r.useState)(""),[c,o]=(0,r.useState)(""),[h,x]=(0,r.useState)("");(0,r.useEffect)(()=>{"unauthenticated"===e?window.location.href="/login":"authenticated"===e&&fetch("/api/students").then(e=>e.json()).then(e=>s(e)).catch(()=>s([]))},[e]);let u=t.filter(e=>(""===c||e.Grade===c)&&(""===h||e.Sex===h)&&((e.Unique_ID||"").toLowerCase().includes(d.toLowerCase())||(e.First_Name||"").toLowerCase().includes(d.toLowerCase())||(e.Father_Name||"").toLowerCase().includes(d.toLowerCase())||(e.Grade||"").toLowerCase().includes(d.toLowerCase()))),m=[...new Set(t.map(e=>e.Grade))],b=[...new Set(t.map(e=>e.Sex))],p=async e=>{if(confirm("Are you sure you want to delete this student?"))try{(await fetch("/api/students",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok?s(t.filter(t=>t._id!==e)):alert("Failed to delete student")}catch(e){alert("Error deleting student")}};return"loading"===e?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("section",{className:"bg-white shadow-lg rounded-lg p-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Students List"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,a.jsx)("input",{type:"text",id:"search",placeholder:"Search by ID, Name, or Grade",value:d,onChange:e=>i(e.target.value),className:"w-full p-3 border rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"classFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Grade"}),(0,a.jsxs)("select",{id:"classFilter",value:c,onChange:e=>o(e.target.value),className:"w-full p-3 border rounded-lg",children:[(0,a.jsx)("option",{value:"",children:"All Grades"}),m.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sexFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Sex"}),(0,a.jsxs)("select",{id:"sexFilter",value:h,onChange:e=>x(e.target.value),className:"w-full p-3 border rounded-lg",children:[(0,a.jsx)("option",{value:"",children:"Both"}),b.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto max-h-[500px]",children:(0,a.jsxs)("table",{className:"min-w-full border-collapse border",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border p-3 text-left",children:"ID Number"}),(0,a.jsx)("th",{className:"border p-3 text-left",children:"Name"}),(0,a.jsx)("th",{className:"border p-3 text-left",children:"Grade"}),(0,a.jsx)("th",{className:"border p-3 text-left",children:"Sex"}),(0,a.jsx)("th",{className:"border p-3 text-left",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:u.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"border p-3",children:e.Unique_ID}),(0,a.jsx)("td",{className:"border p-3",children:"".concat(e.First_Name," ").concat(e.Father_Name)}),(0,a.jsx)("td",{className:"border p-3",children:e.Grade}),(0,a.jsx)("td",{className:"border p-3",children:e.Sex}),(0,a.jsxs)("td",{className:"border p-3 text-center",children:[(0,a.jsx)(n(),{href:"/students/".concat(e._id),className:"bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-700 mr-2",children:"Details"}),(0,a.jsx)("button",{onClick:()=>p(e._id),className:"bg-red-600 text-white px-3 py-1 rounded-lg hover:bg-red-700",children:"Delete"})]})]},e._id))})]})})]})}},89931:(e,t,s)=>{Promise.resolve().then(s.bind(s,33773))}},e=>{var t=t=>e(e.s=t);e.O(0,[9776,9534,2347,4870,7358],()=>t(89931)),_N_E=e.O()}]);