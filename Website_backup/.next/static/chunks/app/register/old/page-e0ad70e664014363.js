(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3124],{53190:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(73365),l=t(1521),r=t(19776),d=t(59534),c=t.n(d);function n(){let{status:e}=(0,r.useSession)(),[s,t]=(0,l.useState)([]),[d,n]=(0,l.useState)(""),[i,o]=(0,l.useState)(""),[h,x]=(0,l.useState)(""),[m,u]=(0,l.useState)(""),[b,g]=(0,l.useState)(""),[j,p]=(0,l.useState)([]);(0,l.useEffect)(()=>{"unauthenticated"===e?window.location.href="/login":"authenticated"===e&&fetch("/api/students").then(e=>e.json()).then(e=>t(e)).catch(()=>t([]))},[e]);let N=[...new Set(s.map(e=>e.Academic_Year))].sort(),f=N.reduce((e,t)=>{let a=[...new Set(s.filter(e=>e.Academic_Year===t).map(e=>e.Grade))].sort();return e[t]=a,e},{}),w=e=>{p(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},v=(e,s)=>{u(e),g(s)},y=s.filter(e=>(!m||e.Academic_Year===m)&&(!b||e.Grade===b)&&(""===i||e.Grade===i)&&(""===h||e.Sex===h)&&((e.Unique_ID||"").toLowerCase().includes(d.toLowerCase())||(e.First_Name||"").toLowerCase().includes(d.toLowerCase())||(e.Father_Name||"").toLowerCase().includes(d.toLowerCase())||(e.Grade||"").toLowerCase().includes(d.toLowerCase()))),S=[...new Set(s.map(e=>e.Grade))].sort(),_=[...new Set(s.map(e=>e.Sex))].sort();return"loading"===e?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("section",{className:"bg-white shadow-lg rounded-lg p-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Student Records"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,a.jsx)("input",{type:"text",id:"search",placeholder:"Search by ID, Name, or Grade",value:d,onChange:e=>n(e.target.value),className:"w-full p-3 border rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"gradeFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Grade"}),(0,a.jsxs)("select",{id:"gradeFilter",value:i,onChange:e=>o(e.target.value),className:"w-full p-3 border rounded-lg",children:[(0,a.jsx)("option",{value:"",children:"All Grades"}),S.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sexFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Sex"}),(0,a.jsxs)("select",{id:"sexFilter",value:h,onChange:e=>x(e.target.value),className:"w-full p-3 border rounded-lg",children:[(0,a.jsx)("option",{value:"",children:"Both"}),_.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Students by Academic Year"}),0===N.length?(0,a.jsx)("p",{className:"text-gray-600",children:"No students found."}):N.map(e=>(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("button",{onClick:()=>w(e),className:"w-full text-left bg-gray-200 p-3 rounded-lg flex justify-between items-center hover:bg-gray-300","aria-expanded":j.includes(e),children:[(0,a.jsxs)("span",{className:"font-medium",children:["Academic Year: ",e]}),(0,a.jsx)("span",{children:j.includes(e)?"▲":"▼"})]}),j.includes(e)&&(0,a.jsx)("div",{className:"pl-4 pt-2",children:0===f[e].length?(0,a.jsxs)("p",{className:"text-gray-600",children:["No grades found for ",e,"."]}):(0,a.jsx)("ul",{className:"space-y-2",children:f[e].map(s=>(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>v(e,s),className:"w-full text-left p-2 rounded-lg ".concat(m===e&&b===s?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"),children:s})},s))})})]},e))]}),m&&b&&(0,a.jsxs)("div",{className:"overflow-x-auto max-h-[500px]",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:["Students in ",b," for Academic Year ",m]}),0===y.length?(0,a.jsxs)("p",{className:"text-gray-600",children:["No students found for ",b," in ",m,"."]}):(0,a.jsxs)("table",{className:"min-w-full border-collapse border",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border p-3 text-left",children:"ID Number"}),(0,a.jsx)("th",{className:"border p-3 text-left",children:"Name"}),(0,a.jsx)("th",{className:"border p-3 text-left",children:"Grade"}),(0,a.jsx)("th",{className:"border p-3 text-left",children:"Sex"}),(0,a.jsx)("th",{className:"border p-3 text-left",children:"Details"})]})}),(0,a.jsx)("tbody",{children:y.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"border p-3",children:e.Unique_ID}),(0,a.jsx)("td",{className:"border p-3",children:"".concat(e.First_Name," ").concat(e.Father_Name)}),(0,a.jsx)("td",{className:"border p-3",children:e.Grade}),(0,a.jsx)("td",{className:"border p-3",children:e.Sex}),(0,a.jsx)("td",{className:"border p-3 text-center",children:(0,a.jsx)(c(),{href:"/students/".concat(e._id),className:"bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-700",children:"Details"})})]},e._id))})]})]})]})}},57015:(e,s,t)=>{Promise.resolve().then(t.bind(t,53190))}},e=>{var s=s=>e(e.s=s);e.O(0,[9776,9534,2347,4870,7358],()=>s(57015)),_N_E=e.O()}]);