(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7618],{67548:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>c});var s=l(73365),a=l(1521);function n(e,t){let l=new Blob([[Object.keys(e[0]||{}).join(","),...e.map(e=>Object.values(e).map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(","))].join("\n")],{type:"text/csv"}),s=URL.createObjectURL(l),a=document.createElement("a");a.href=s,a.download=t,a.click(),URL.revokeObjectURL(s)}function c(){let[e,t]=(0,a.useState)([]),[l,c]=(0,a.useState)([]),[r,d]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0);(0,a.useEffect)(()=>{o(!0),Promise.all([fetch("/api/students").then(e=>e.json()),fetch("/api/facilitators").then(e=>e.json()),fetch("/api/attendance").then(e=>e.json())]).then(e=>{let[l,s,a]=e;t(Array.isArray(l)?l:[]),c(Array.isArray(s)?s:[]),d(Array.isArray(a)?a:[]),o(!1)})},[]);let x=r.length>0?Math.round(r.filter(e=>e.present).length/r.length*100):0;return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col gap-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-extrabold text-blue-900 mb-4",children:"Reports & Export"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-xl p-6 flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-2xl font-bold text-blue-700",children:i?"-":e.length}),(0,s.jsx)("span",{className:"text-gray-600 mt-2",children:"Total Students"})]}),(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-xl p-6 flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-2xl font-bold text-green-700",children:i?"-":l.length}),(0,s.jsx)("span",{className:"text-gray-600 mt-2",children:"Facilitators"})]}),(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-xl p-6 flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-2xl font-bold text-yellow-600",children:i?"-":"".concat(x,"%")}),(0,s.jsx)("span",{className:"text-gray-600 mt-2",children:"Attendance Rate"})]}),(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-xl p-6 flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-2xl font-bold text-purple-700",children:i?"-":r.length}),(0,s.jsx)("span",{className:"text-gray-600 mt-2",children:"Attendance Records"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,s.jsx)("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",onClick:()=>n(e,"students.csv"),disabled:0===e.length,children:"Export Students CSV"}),(0,s.jsx)("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",onClick:()=>n(l,"facilitators.csv"),disabled:0===l.length,children:"Export Facilitators CSV"}),(0,s.jsx)("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",onClick:()=>n(r,"attendance.csv"),disabled:0===r.length,children:"Export Attendance CSV"})]})]})}},77211:(e,t,l)=>{Promise.resolve().then(l.bind(l,67548))}},e=>{var t=t=>e(e.s=t);e.O(0,[2347,4870,7358],()=>t(77211)),_N_E=e.O()}]);