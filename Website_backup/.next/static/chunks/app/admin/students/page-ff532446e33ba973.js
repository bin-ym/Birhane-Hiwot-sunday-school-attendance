(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5291],{6801:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>n});var t=l(73365),r=l(1521),s=l(59534),d=l.n(s);function n(){let[e,a]=(0,r.useState)([]),[l,s]=(0,r.useState)(!0),[n,c]=(0,r.useState)(null),[i,o]=(0,r.useState)(""),[u,m]=(0,r.useState)(1),[h,x]=(0,r.useState)(!1),[p,N]=(0,r.useState)(null),[b,g]=(0,r.useState)({Unique_ID:"",First_Name:"",Father_Name:"",Grandfather_Name:"",Mothers_Name:"",Christian_Name:"",DOB_Date:"",DOB_Month:"",DOB_Year:"",Age:0,Sex:"",Phone_Number:"",Class:"",Occupation:"",School:"",School_Other:"",Educational_Background:"",Place_of_Work:"",Address:"",Address_Other:"",Academic_Year:"",Grade:""}),[f,j]=(0,r.useState)(null),[_,v]=(0,r.useState)(!1),y=(0,r.useCallback)(async()=>{s(!0);try{let e=await fetch("/api/students");if(!e.ok)throw Error("HTTP error! Status: ".concat(e.status));let l=await e.json();a(Array.isArray(l)?l:[]),c(null)}catch(e){c("Failed to load students")}finally{s(!1)}},[]);function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;N(e),g(e?{...e,DOB_Date:e.DOB_Date||"",DOB_Month:e.DOB_Month||"",DOB_Year:e.DOB_Year||""}:{Unique_ID:"",First_Name:"",Father_Name:"",Grandfather_Name:"",Mothers_Name:"",Christian_Name:"",DOB_Date:"",DOB_Month:"",DOB_Year:"",Age:0,Sex:"",Phone_Number:"",Class:"",Occupation:"",School:"",School_Other:"",Educational_Background:"",Place_of_Work:"",Address:"",Address_Other:"",Academic_Year:"",Grade:""}),j(null),x(!0)}function D(){x(!1),N(null),g({Unique_ID:"",First_Name:"",Father_Name:"",Grandfather_Name:"",Mothers_Name:"",Christian_Name:"",DOB_Date:"",DOB_Month:"",DOB_Year:"",Age:0,Sex:"",Phone_Number:"",Class:"",Occupation:"",School:"",School_Other:"",Educational_Background:"",Place_of_Work:"",Address:"",Address_Other:"",Academic_Year:"",Grade:""}),j(null)}(0,r.useEffect)(()=>{y()},[y]),(0,r.useEffect)(()=>{m(1)},[e.length]);let S=(0,r.useCallback)(async e=>{e.preventDefault(),v(!0),j(null);try{let e=p?"PUT":"POST",a=p?{...b,id:p._id}:b,l=await fetch("/api/students",{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!l.ok){let e=await l.json();throw Error(e.error||"Failed to save student")}D(),y()}catch(e){j(e.message)}finally{v(!1)}},[p,b,y]),O=(0,r.useCallback)(async e=>{if(confirm("Are you sure you want to delete this student?")){v(!0);try{if(!(await fetch("/api/students",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok)throw Error("Failed to delete student");y()}catch(e){c("Failed to delete student")}finally{v(!1)}}},[y]),q=(0,r.useMemo)(()=>e.filter(e=>[e.Unique_ID,e.First_Name,e.Father_Name,e.Grade].join(" ").toLowerCase().includes(i.toLowerCase())),[e,i]),A=(0,r.useMemo)(()=>q.slice((u-1)*10,10*u),[q,u]),B=Math.ceil(q.length/10);return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col gap-8 p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-extrabold text-blue-900",children:"Manage Students"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50",onClick:()=>(function(e,a){if(!e.length)return;let l=new Blob([["Unique ID,First Name,Father Name,Grandfather Name,Mother's Name,Christian Name,DOB,Age,Sex,Phone Number,Class,Occupation,School,Educational Background,Address,Academic Year,Grade",...e.map(e=>[e.Unique_ID,e.First_Name,e.Father_Name,e.Grandfather_Name,e.Mothers_Name,e.Christian_Name,"".concat(e.DOB_Date,"/").concat(e.DOB_Month,"/").concat(e.DOB_Year),e.Age,e.Sex,e.Phone_Number,e.Class,e.Occupation,e.School||"-",e.Educational_Background||"-",e.Address,e.Academic_Year,e.Grade].map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(","))].join("\n")],{type:"text/csv"}),t=URL.createObjectURL(l),r=document.createElement("a");r.href=t,r.download=a,r.click(),URL.revokeObjectURL(t)})(q,"students.csv"),disabled:0===q.length,"aria-label":"Export students to CSV",children:"Export CSV"}),(0,t.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",onClick:()=>C(),"aria-label":"Add new student",children:"+ Add Student"})]})]}),(0,t.jsxs)("label",{className:"flex flex-col max-w-xs",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Search Students"}),(0,t.jsx)("input",{type:"text",placeholder:"Search by ID, Name, or Grade",className:"p-2 border rounded w-full",value:i,onChange:e=>{o(e.target.value),m(1)},"aria-label":"Search students"})]}),l?(0,t.jsx)("div",{className:"text-gray-500",children:"Loading students..."}):n?(0,t.jsx)("div",{className:"text-red-500",children:n}):(0,t.jsxs)("div",{className:"overflow-x-auto max-h-[600px]",children:[(0,t.jsxs)("table",{className:"min-w-full border-collapse border",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"border p-3 text-left",children:"Unique ID"}),(0,t.jsx)("th",{className:"border p-3 text-left",children:"Name"}),(0,t.jsx)("th",{className:"border p-3 text-left",children:"Grade"}),(0,t.jsx)("th",{className:"border p-3 text-left",children:"Sex"}),(0,t.jsx)("th",{className:"border p-3 text-left",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:A.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"border p-3",children:e.Unique_ID}),(0,t.jsx)("td",{className:"border p-3",children:"".concat(e.First_Name," ").concat(e.Father_Name)}),(0,t.jsx)("td",{className:"border p-3",children:e.Grade}),(0,t.jsx)("td",{className:"border p-3",children:e.Sex}),(0,t.jsxs)("td",{className:"border p-3 flex gap-2",children:[(0,t.jsx)(d(),{href:"/admin/students/".concat(e._id),className:"bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-700","aria-label":"View details for ".concat(e.First_Name),children:"Details"}),(0,t.jsx)("button",{className:"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600",onClick:()=>C(e),"aria-label":"Edit ".concat(e.First_Name),children:"Edit"}),(0,t.jsx)("button",{className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>O(e._id),disabled:_,"aria-label":"Delete ".concat(e.First_Name),children:"Delete"})]})]},e._id))})]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-4 justify-center",children:[(0,t.jsx)("button",{className:"px-3 py-1 rounded border bg-gray-100 disabled:opacity-50",onClick:()=>m(e=>Math.max(1,e-1)),disabled:1===u,"aria-label":"Previous page",children:"Prev"}),(0,t.jsxs)("span",{className:"px-2",children:["Page ",u," of ",B]}),(0,t.jsx)("button",{className:"px-3 py-1 rounded border bg-gray-100 disabled:opacity-50",onClick:()=>m(e=>Math.min(B,e+1)),disabled:u===B,"aria-label":"Next page",children:"Next"})]})]}),h&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 w-full max-w-lg relative overflow-y-auto max-h-[80vh]",children:[(0,t.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",onClick:D,"aria-label":"Close modal",children:"\xd7"}),(0,t.jsx)("h3",{className:"text-xl font-bold mb-4",children:p?"Edit Student":"Add Student"}),(0,t.jsxs)("form",{onSubmit:S,className:"flex flex-col gap-4",children:[(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Unique ID"}),(0,t.jsx)("input",{type:"text",placeholder:"Unique ID",className:"p-3 border rounded-lg",value:b.Unique_ID,onChange:e=>g({...b,Unique_ID:e.target.value}),required:!0,"aria-required":"true"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"First Name"}),(0,t.jsx)("input",{type:"text",placeholder:"First Name",className:"p-3 border rounded-lg",value:b.First_Name,onChange:e=>g({...b,First_Name:e.target.value}),required:!0,"aria-required":"true"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Father Name"}),(0,t.jsx)("input",{type:"text",placeholder:"Father Name",className:"p-3 border rounded-lg",value:b.Father_Name,onChange:e=>g({...b,Father_Name:e.target.value}),required:!0,"aria-required":"true"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Grandfather Name"}),(0,t.jsx)("input",{type:"text",placeholder:"Grandfather Name",className:"p-3 border rounded-lg",value:b.Grandfather_Name,onChange:e=>g({...b,Grandfather_Name:e.target.value}),required:!0,"aria-required":"true"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Mother's Name"}),(0,t.jsx)("input",{type:"text",placeholder:"Mother's Name",className:"p-3 border rounded-lg",value:b.Mothers_Name,onChange:e=>g({...b,Mothers_Name:e.target.value}),required:!0,"aria-required":"true"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Christian Name"}),(0,t.jsx)("input",{type:"text",placeholder:"Christian Name",className:"p-3 border rounded-lg",value:b.Christian_Name,onChange:e=>g({...b,Christian_Name:e.target.value}),required:!0,"aria-required":"true"})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("label",{className:"flex flex-col flex-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"DOB Date"}),(0,t.jsx)("input",{type:"text",placeholder:"DD",className:"p-3 border rounded-lg",value:b.DOB_Date,onChange:e=>g({...b,DOB_Date:e.target.value}),required:!0,"aria-required":"true"})]}),(0,t.jsxs)("label",{className:"flex flex-col flex-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"DOB Month"}),(0,t.jsx)("input",{type:"text",placeholder:"MM",className:"p-3 border rounded-lg",value:b.DOB_Month,onChange:e=>g({...b,DOB_Month:e.target.value}),required:!0,"aria-required":"true"})]}),(0,t.jsxs)("label",{className:"flex flex-col flex-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"DOB Year"}),(0,t.jsx)("input",{type:"text",placeholder:"YYYY",className:"p-3 border rounded-lg",value:b.DOB_Year,onChange:e=>g({...b,DOB_Year:e.target.value}),required:!0,"aria-required":"true"})]})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Age"}),(0,t.jsx)("input",{type:"number",placeholder:"Age",className:"p-3 border rounded-lg",value:b.Age,onChange:e=>g({...b,Age:parseInt(e.target.value)||0}),required:!0,"aria-required":"true"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Sex"}),(0,t.jsxs)("select",{className:"p-3 border rounded-lg",value:b.Sex,onChange:e=>g({...b,Sex:e.target.value}),required:!0,"aria-required":"true",children:[(0,t.jsx)("option",{value:"",children:"Select Sex"}),(0,t.jsx)("option",{value:"Male",children:"Male"}),(0,t.jsx)("option",{value:"Female",children:"Female"})]})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Phone Number"}),(0,t.jsx)("input",{type:"text",placeholder:"Phone Number",className:"p-3 border rounded-lg",value:b.Phone_Number,onChange:e=>g({...b,Phone_Number:e.target.value}),required:!0,"aria-required":"true"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Class"}),(0,t.jsx)("input",{type:"text",placeholder:"Class",className:"p-3 border rounded-lg",value:b.Class,onChange:e=>g({...b,Class:e.target.value}),required:!0,"aria-required":"true"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Occupation"}),(0,t.jsx)("input",{type:"text",placeholder:"Occupation",className:"p-3 border rounded-lg",value:b.Occupation,onChange:e=>g({...b,Occupation:e.target.value}),required:!0,"aria-required":"true"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"School (Optional)"}),(0,t.jsx)("input",{type:"text",placeholder:"School",className:"p-3 border rounded-lg",value:b.School||"",onChange:e=>g({...b,School:e.target.value})})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Educational Background (Optional)"}),(0,t.jsx)("input",{type:"text",placeholder:"Educational Background",className:"p-3 border rounded-lg",value:b.Educational_Background||"",onChange:e=>g({...b,Educational_Background:e.target.value})})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Address"}),(0,t.jsx)("input",{type:"text",placeholder:"Address",className:"p-3 border rounded-lg",value:b.Address,onChange:e=>g({...b,Address:e.target.value}),required:!0,"aria-required":"true"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Academic Year"}),(0,t.jsx)("input",{type:"text",placeholder:"Academic Year",className:"p-3 border rounded-lg",value:b.Academic_Year,onChange:e=>g({...b,Academic_Year:e.target.value}),required:!0,"aria-required":"true"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Grade"}),(0,t.jsx)("input",{type:"text",placeholder:"Grade",className:"p-3 border rounded-lg",value:b.Grade,onChange:e=>g({...b,Grade:e.target.value}),required:!0,"aria-required":"true"})]}),f&&(0,t.jsx)("div",{className:"text-red-500 text-sm",children:f}),(0,t.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400",disabled:_,"aria-label":p?"Update student":"Add student",children:_?"Saving...":p?"Update Student":"Add Student"})]})]})})]})}},42862:(e,a,l)=>{Promise.resolve().then(l.bind(l,6801))}},e=>{var a=a=>e(e.s=a);e.O(0,[9534,2347,4870,7358],()=>a(42862)),_N_E=e.O()}]);